(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{607:function(e,n,r){"use strict";r.r(n);var a=r(7),s=Object(a.a)({},(function(){var e=this,n=e._self._c;return n("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[n("p",[e._v("单点登录有效减少繁琐的登录操作，优化了用户体验")]),e._v(" "),n("h2",{attrs:{id:"单点登录"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#单点登录"}},[e._v("#")]),e._v(" 单点登录")]),e._v(" "),n("p",[e._v("单点登录主要功能在后端，这里只讲述使用 "),n("code",[e._v("pure-admin")]),e._v(" 前端代码如何实现"),n("br"),e._v("\n下面以完整版为例，精简版想要开启单点登录只需将 "),n("a",{attrs:{href:"https://gitee.com/yiming_chang/pure-admin-thin/blob/main/src/router/index.ts#L1",target:"_blank",rel:"noopener noreferrer"}},[e._v('import "@/utils/sso"'),n("OutboundLink")],1),e._v(" 注释解开即可")]),e._v(" "),n("h3",{attrs:{id:"前端实现步骤划分"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#前端实现步骤划分"}},[e._v("#")]),e._v(" 前端实现步骤划分")]),e._v(" "),n("ul",[n("li",[e._v("先判断是否为单点登录，不为则直接返回不再进行任何逻辑处理，下面是单点登录的处理步骤")])]),e._v(" "),n("ol",[n("li",[n("a",{attrs:{href:"https://gitee.com/yiming_chang/vue-pure-admin/blob/main/src/utils/sso.ts#L37",target:"_blank",rel:"noopener noreferrer"}},[e._v("清空本地旧信息"),n("OutboundLink")],1)]),e._v(" "),n("li",[n("a",{attrs:{href:"https://gitee.com/yiming_chang/vue-pure-admin/blob/main/src/utils/sso.ts#L40",target:"_blank",rel:"noopener noreferrer"}},[e._v(" 获取 "),n("code",[e._v("url")]),e._v(" 中的重要参数信息，然后通过 "),n("code",[e._v("setToken")]),e._v(" 保存在本地"),n("OutboundLink")],1)]),e._v(" "),n("li",[n("a",{attrs:{href:"https://gitee.com/yiming_chang/vue-pure-admin/blob/main/src/utils/sso.ts#L43-L44",target:"_blank",rel:"noopener noreferrer"}},[e._v("删除不需要显示在 "),n("code",[e._v("url")]),e._v(" 的参数，这样做更安全"),n("OutboundLink")],1)]),e._v(" "),n("li",[n("a",{attrs:{href:"https://gitee.com/yiming_chang/vue-pure-admin/blob/main/src/utils/sso.ts#L55",target:"_blank",rel:"noopener noreferrer"}},[e._v("使用 "),n("code",[e._v("window.location.replace")]),e._v(" 跳转正确页面，"),n("code",[e._v("window.location.replace")]),e._v(" 可以替换浏览器历史记录项"),n("OutboundLink")],1)])]),e._v(" "),n("h3",{attrs:{id:"完整代码"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#完整代码"}},[e._v("#")]),e._v(" 完整代码")]),e._v(" "),n("p",[n("a",{attrs:{href:"https://gitee.com/yiming_chang/vue-pure-admin/blob/main/src/utils/sso.ts",target:"_blank",rel:"noopener noreferrer"}},[e._v("点击查看完整代码"),n("OutboundLink")],1)]),e._v(" "),n("h3",{attrs:{id:"url-格式"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#url-格式"}},[e._v("#")]),e._v(" url 格式")]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("以平台的预览地址为例\n\n完整地址 https://yiming_chang.gitee.io/vue-pure-admin/#/welcome?username=sso&roles=admin&accessToken=eyJhbGciOiJIUzUxMiJ9.admin\n\nhttps://yiming_chang.gitee.io/vue-pure-admin  域名\n\n/#/welcome  要跳转的页面（这里是hash路由模式，根据实际情况修改即可）\n\n?username=sso&roles=admin&accessToken=eyJhbGciOiJIUzUxMiJ9.admin  需要携带的三个（username、roles、accessToken）必传参数\n")])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br"),n("span",{staticClass:"line-number"},[e._v("3")]),n("br"),n("span",{staticClass:"line-number"},[e._v("4")]),n("br"),n("span",{staticClass:"line-number"},[e._v("5")]),n("br"),n("span",{staticClass:"line-number"},[e._v("6")]),n("br"),n("span",{staticClass:"line-number"},[e._v("7")]),n("br"),n("span",{staticClass:"line-number"},[e._v("8")]),n("br"),n("span",{staticClass:"line-number"},[e._v("9")]),n("br")])]),n("h3",{attrs:{id:"测试地址"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#测试地址"}},[e._v("#")]),e._v(" 测试地址")]),e._v(" "),n("ul",[n("li",[e._v("线上测试地址")])]),e._v(" "),n("p",[n("a",{attrs:{href:"https://yiming_chang.gitee.io/vue-pure-admin/#/welcome?username=sso&roles=admin&accessToken=eyJhbGciOiJIUzUxMiJ9.admin",target:"_blank",rel:"noopener noreferrer"}},[e._v("demo1"),n("OutboundLink")],1),e._v(" "),n("a",{attrs:{href:"https://yiming_chang.gitee.io/vue-pure-admin/#/pure-table/index?username=sso&roles=admin&accessToken=eyJhbGciOiJIUzUxMiJ9.admin",target:"_blank",rel:"noopener noreferrer"}},[e._v("demo2"),n("OutboundLink")],1),e._v(" "),n("a",{attrs:{href:"https://yiming_chang.gitee.io/vue-pure-admin/#/permission/button/index?username=sso&roles=admin&accessToken=eyJhbGciOiJIUzUxMiJ9.admin",target:"_blank",rel:"noopener noreferrer"}},[e._v("demo3"),n("OutboundLink")],1)]),e._v(" "),n("ul",[n("li",[e._v("本地运行测试地址（需要先在本地运行平台哦，完整版、精简版下面地址都支持）")])]),e._v(" "),n("p",[n("a",{attrs:{href:"http://localhost:8848/#/welcome?username=sso&roles=admin&accessToken=eyJhbGciOiJIUzUxMiJ9.admin",target:"_blank",rel:"noopener noreferrer"}},[e._v("demo1"),n("OutboundLink")],1),e._v(" "),n("a",{attrs:{href:"http://localhost:8848/#/permission/page/index?username=sso&roles=admin&accessToken=eyJhbGciOiJIUzUxMiJ9.admin",target:"_blank",rel:"noopener noreferrer"}},[e._v("demo2"),n("OutboundLink")],1),e._v(" "),n("a",{attrs:{href:"http://localhost:8848/#/permission/button/index?username=sso&roles=admin&accessToken=eyJhbGciOiJIUzUxMiJ9.admin",target:"_blank",rel:"noopener noreferrer"}},[e._v("demo3"),n("OutboundLink")],1)])])}),[],!1,null,null,null);n.default=s.exports}}]);